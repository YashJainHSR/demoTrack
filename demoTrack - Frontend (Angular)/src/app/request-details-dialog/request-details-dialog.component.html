<div style="max-height:85vh;">
  <h1
    [ngClass]="{ 'approved': data.status=='Approved','rejected': data.status=='Rejected','completed': data.status=='Completed'}"
    mat-dialog-title>Details for Request #{{data.requestNumber}} (generated at {{data.requestTimestamp}}) ||
    Status: {{data.status}}</h1>
  <div class="table-responsive-sm" mat-dialog-content>
    <table class="table-sm table-bordered">
      <thead style="color: chocolate" *ngIf="currentUser.role!='Sales'">
      Requester Details
      </thead>
      <tbody>
      <tr *ngIf="currentUser.role!='Sales'">
        <th>Requester ID</th>
        <td>{{data.requesterUserId}}</td>
        <th>Requester Name</th>
        <td>{{data.requesterName}}</td>
      </tr>
      </tbody>
      <thead style="color: chocolate">
      Customer Details
      </thead>
      <tbody>
      <tr>
        <th>Customer Name</th>
        <td>{{data.customerName}}</td>
        <th>Customer Email</th>
        <td>{{data.customerEmail}}</td>
      </tr>
      <tr>
        <th>Customer Location</th>
        <td>{{data.customerLocation}}</td>
        <th>Customer Business Line</th>
        <td>{{data.customerBusinessLine}}</td>
      </tr>
      <tr>
        <th>Contact Person Name</th>
        <td>{{data.contactPersonName}}</td>
        <th>Contact Person Email</th>
        <td>{{data.contactPersonEmail}}</td>
      </tr>
      </tbody>
      <thead style="color: chocolate">
      Product Details
      </thead>
      <tbody>
      <tr>
        <th>Product Group</th>
        <td>{{data.productGroup}}</td>
        <th>Product Line</th>
        <td>{{data.productLine}}</td>
      </tr>
      <tr>
        <th>Product</th>
        <td>{{data.product}}</td>
      </tr>
      </tbody>
      <thead style="color: chocolate">
      Demo Details
      </thead>
      <tbody>
      <tr>
        <th>Demo Date</th>
        <td>{{data.demoDate}}</td>
        <th>Demo Slot</th>
        <td>{{data.demoSlot}}</td>
      </tr>
      <tr>
        <th>Demo Site</th>
        <td>{{data.demoSite}}</td>
        <th>Number of Guests</th>
        <td>{{data.numberOfGuests}}</td>
      </tr>
      <tr>
        <th>Demo Expectation</th>
        <td colspan="3">{{data.demoExpectation}}</td>
      </tr>
      </tbody>

      <thead *ngIf="data.status==='Completed'" style="color: chocolate">
      Feedback Details
      </thead>
      <tbody *ngIf="data.status==='Completed'">
      <tr>
        <th colspan="3">Was the Application Support Engineer well dressed and groomed ?</th>
        <td>{{data.aseDressCode}}</td>
      </tr>
      <tr>
        <th colspan="3">Rating for Technical Knowledge of Application Support Engineer</th>
        <td>{{data.aseTechnicalKnowledgeRating}}/5</td>
      </tr>
      <tr>
        <th colspan="3">Rating for Clinical Knowledge of Application Support Engineer</th>
        <td>{{data.aseClinicalKnowledgeRating}}/5</td>
      </tr>
      <tr>
        <th colspan="3">Did the Application Specialist prepare the site for Demo ?</th>
        <td>{{data.demoSitePrepared}}</td>
      </tr>
      <tr>
        <th colspan="3">Rating for Application Support Engineer's customer handling capability</th>
        <td>{{data.aseCustomerHandlingRating}}/5</td>
      </tr>
      <tr>
        <th colspan="3">Ambiance rating of the Reference Site</th>
        <td>{{data.siteAmbianceRating}}/5</td>
      </tr>
      <tr>
        <th colspan="3">Product Rating</th>
        <td>{{data.productRating}}/5</td>
      </tr>
      <tr>
        <th colspan="3">Was the Customer convinced from Demo ?</th>
        <td>{{data.customerConvinced}}</td>
      </tr>
      <tr>
        <th>Feedback</th>
        <td colspan="3">{{data.feedback}}</td>
      </tr>
      <tr>
        <th>Comment</th>
        <td colspan="3">{{data.comment}}</td>
      </tr>
      </tbody>
    </table>
  </div>
  <div mat-dialog-actions>
    <button mat-button (click)="onNoClick()" cdkFocusInitial>Back</button>
    <div *ngIf="currentUser.role!='Sales' && data.status==='Submitted'" class="btn-group mr-2 ml-auto">
      <button type="button" class="btn btn-sm btn-success ml-auto" [mat-dialog-close]="'approve'">Approve</button>
      <button type="button" class="btn btn-sm btn-danger ml-auto" [mat-dialog-close]="'reject'">Reject</button>
    </div>
    <div
      *ngIf="(currentUser.role==='Sales' && data.status==='Approved') || (currentUser.role==='Admin' && data.status==='Approved' && calc(data.demoDate)===true)"
      class="btn-group mr-2 ml-auto">
      <button *ngIf="data.status==='Approved' && calc(data.demoDate)" type="button"
              class="btn btn-sm btn-success ml-auto" [mat-dialog-close]="'feedback'">Feedback
      </button>
      <button *ngIf="data.status==='Approved' && !calc(data.demoDate)" type="button"
              class="btn btn-sm btn-success ml-auto" disabled>Demo Pending
      </button>
    </div>
  </div>
</div>
